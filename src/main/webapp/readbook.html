<!DOCTYPE html>
<html lang="ko">

<head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì±… ì§„í–‰ë¥  ì¶”ì </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">

<style>
    @import url('https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700&display=swap');

    body {
        font-family: 'Nanum Gothic', sans-serif;
        background-color: #f4f7f6;
        text-align: center;
        padding: 20px;
        color: #333;
    }

    .container {
        margin-top: 50px;
    }

    h1 {
        font-size: 2rem;
        color: #007bff;
        margin-bottom: 30px;
    }

    .mb-4 {
        margin-bottom: 20px !important;
    }

    .form-control {
        font-size: 0.9rem;
        padding: 10px;
        border-radius: 5px;
        border: 1px solid #ddd;
    }

    .btn {
        font-size: 0.9rem;
        padding: 8px 20px;
        border-radius: 5px;
        transition: all 0.3s ease;
    }

    .btn-success {
        background-color: #28a745;
        border-color: #28a745;
    }

    .btn-success:hover {
        background-color: #218838;
        border-color: #1e7e34;
    }

    .btn-primary {
        background-color: #007bff;
        border-color: #007bff;
    }

    .btn-primary:hover {
        background-color: #0056b3;
        border-color: #004085;
    }

    .btn-outline-success {
        color: #28a745;
        border-color: #28a745;
    }

    .btn-outline-success:hover {
        background-color: #28a745;
        color: #fff;
    }

    .btn-outline-primary {
        color: #007bff;
        border-color: #007bff;
    }

    .btn-outline-primary:hover {
        background-color: #007bff;
        color: #fff;
    }

    .book {
        border: 1px solid #ddd;
        border-radius: 10px;
        padding: 20px;
        margin: 15px auto;
        background: #fff;
        text-align: left;
        max-width: 700px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    .book img {
        max-width: 120px;
        border-radius: 5px;
        float: left;
        margin-right: 15px;
    }

    .book h3 {
        font-size: 1.5rem;
        margin-top: 0;
        color: #333;
    }

    .progress {
        height: 20px;
        background-color: #e9ecef;
        border-radius: 10px;
        overflow: hidden;
    }

    .progress-bar {
        height: 100%;
        background-color: #007bff;
        transition: width 0.4s ease;
    }

    section#main .btn {
        margin: 10px;
    }

    #main .btn {
        font-size: 0.85rem;
        padding: 8px 16px;
    }

    #main {
        margin-top: 30px;
    }
</style>

</head>

<body>
    <div class="container">
        <h1>ğŸ“šBook and pickê³¼ í•¨ê»˜ ì±… ì½ì–´ìš”!</h1>

        <!-- ì±… ê²€ìƒ‰ -->
        <div class="mb-4">
            <input id="book-title-input" type="text" placeholder="ì±… ì œëª© ë˜ëŠ” ì €ìë¥¼ ì…ë ¥í•˜ì„¸ìš”" class="form-control"
                style="max-width: 300px; margin: auto;">
            <button id="search-book" class="btn btn-success mt-2">ì±… ê²€ìƒ‰</button>
        </div>

        <!-- ì±… ì •ë³´ -->
        <div class="book" id="book-info" style="display: none;">
            <img id="book-image" src="#" alt="ì±… ì´ë¯¸ì§€">
            <div>
                <h3 id="book-title">ì±… ì œëª©</h3>
                <p id="book-author">ì €ì: </p>
                <p id="book-pages">ì´ í˜ì´ì§€: <span id="total-pages">-</span></p>
                <p>í˜„ì¬ í˜ì´ì§€: <span id="current-page">0</span></p>
                <p>ì§„í–‰ë¥ : <span id="progress-percentage">0%</span></p>
                <div class="progress">
                    <div id="progress-bar" class="progress-bar" style="width: 0%;"></div>
                </div>
                <br>
                <!-- í˜ì´ì§€ ì—…ë°ì´íŠ¸ -->
                <input id="page-input" type="number" placeholder="ì½ì€ í˜ì´ì§€ ì…ë ¥" class="form-control"
                    style="max-width: 300px; margin: auto;">
                <button id="update-progress" class="btn btn-primary mt-2">ì§„í–‰ë¥  ì—…ë°ì´íŠ¸</button>
                
            </div>
        </div>
    </div>

    <script>
        // Google Books API í‚¤
        const API_KEY = "AIzaSyBPoB0Du6z_Hm06dtbv0tF6DJhnfW1A2vs";

        // ì±… ì •ë³´
        const book = {
            title: "",
            author: "",
            totalPages: 0,
            currentPage: 0
        };

        // DOM ìš”ì†Œ
        const bookInfo = document.getElementById("book-info");
        const bookTitleInput = document.getElementById("book-title-input");
        const searchBookButton = document.getElementById("search-book");
        const bookTitleElement = document.getElementById("book-title");
        const bookAuthorElement = document.getElementById("book-author");
        const bookPagesElement = document.getElementById("book-pages");
        const bookImageElement = document.getElementById("book-image");
        const totalPagesElement = document.getElementById("total-pages");
        const currentPageElement = document.getElementById("current-page");
        const progressPercentageElement = document.getElementById("progress-percentage");
        const progressBarElement = document.getElementById("progress-bar");
        const pageInputElement = document.getElementById("page-input");
        const updateProgressButton = document.getElementById("update-progress");

        // ì±… ê²€ìƒ‰
        searchBookButton.addEventListener("click", async () => {
            const title = bookTitleInput.value.trim();
            if (title === "") {
                alert("ì±… ì œëª©ê³¼ ì €ìë¥¼ ì…ë ¥í•˜ì„¸ìš”!");
                return;
            }

            try {
                const response = await fetch(`https://www.googleapis.com/books/v1/volumes?q=${title}&key=${API_KEY}`);
                const data = await response.json();
                if (data.items && data.items.length > 0) {
                    const bookData = data.items[0].volumeInfo;
                    book.title = bookData.title || "ì œëª© ì—†ìŒ";
                    book.author = (bookData.authors && bookData.authors.join(", ")) || "ì €ì ì •ë³´ ì—†ìŒ";
                    book.totalPages = bookData.pageCount || 0;

                    // ì±… ì •ë³´ ì—…ë°ì´íŠ¸
                    bookTitleElement.textContent = book.title;
                    bookAuthorElement.textContent = `ì €ì: ${book.author}`;
                    totalPagesElement.textContent = book.totalPages > 0 ? book.totalPages : "ì •ë³´ ì—†ìŒ";
                    bookImageElement.src = bookData.imageLinks ? bookData.imageLinks.thumbnail : "#";
                    bookImageElement.alt = book.title;

                    // ì§„í–‰ë¥  ì´ˆê¸°í™”
                    book.currentPage = 0;
                    updateProgress();

                    // ì±… ì •ë³´ í‘œì‹œ
                    bookInfo.style.display = "block";
                } else {
                    alert("ì±… ì •ë³´ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!");
                }
            } catch (error) {
                console.error("Error fetching book data:", error);
                alert("ì±… ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ë° ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.");
            }
        });

        // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        const updateProgress = () => {
            const percentage = book.totalPages > 0
                ? Math.min((book.currentPage / book.totalPages) * 100, 100).toFixed(2)
                : 0;
            currentPageElement.textContent = book.currentPage;
            progressPercentageElement.textContent = `${percentage}%`;
            progressBarElement.style.width = `${percentage}%`;

            // ì§„í–‰ë¥  100%ì¼ ë•Œ ë‹¤ìŒ í˜ì´ì§€ë¡œ ì´ë™
            if (percentage === "100.00") {
                alert("ì´ ì±…ì„ ì™„ë…í•˜ì…¨ìŠµë‹ˆë‹¤. ì¶•í•˜ë“œë¦½ë‹ˆë‹¤!");
            }
        };

        // ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ ë²„íŠ¼ í´ë¦­ ì´ë²¤íŠ¸
        updateProgressButton.addEventListener("click", () => {
            const enteredPage = parseInt(pageInputElement.value, 10);
            if (!isNaN(enteredPage) && enteredPage >= 0 && enteredPage <= book.totalPages) {
                book.currentPage = enteredPage;
                updateProgress();
            } else {
                alert("ìœ íš¨í•œ í˜ì´ì§€ ìˆ˜ë¥¼ ì…ë ¥í•˜ì„¸ìš”!");
            }
        });
    </script>
    
    <div class="container">
        <section id="main" class="mx-auto my-5 py-5 px-3">
            <p style="color: #F96791;">
            </p>

          
           <button id="boardBtn" type="button" class="btn btn-outline-success mt-3" onclick="goToboard()"  ">ì±… ë¦¬ë·°ê²Œì‹œíŒ </button>
             <button id="profileBtn" type="button" class="btn btn-outline-success mt-3" onclick="goToprofile()"  ">ë‚´ í”„ë¡œí•„ ë³´ëŸ¬ê°€ê¸° </button> 
             <button id="logoutBtn" type="button" class="btn btn-outline-primary mt-3" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
            <button id="goToMain" type="button" class="btn btn-outline-success mt-3" onclick="goToMain()"> ë©”ì¸í˜ì´ì§€ë¡œ ê°€ê¸°</button>
        </section>
    </div>
</body>

</html>
 <script src="js/start.js"></script>
